data = data_1
) %>%
hc_drilldown(
series = list(
name = "Centro-Oeste", id = "centro-oeste", data = (list(name="la", y=4,drilldown="la"))
)
#series =  list_parse(data_2 )#list(unlist(dat_2, recursive = F), unlist(dat_3, recursive = F))
) # %>%
hc
hc <- highchart() %>% hc_chart(type="column") %>% hc_xAxis(type="category") %>%
hc_add_series( name = "Things",
data = data_1
)
)
hc <- highchart() %>% hc_chart(type="column") %>% hc_xAxis(type="category") %>%
hc_add_series( name = "Things",
data = data_1
)
hc
hc <- highchart() %>% hc_chart(type="column") %>% hc_xAxis(type="category") %>%
hc_add_series( name = "Things",
data = data_1
)  %>%
hc_drilldown(
series = list(
list(
name = "Animals",
id = "animals",
data = list(
list(
name = "Centro-Oeste", id = "centro-oeste", data = list(list(name="la", y=4,drilldown="la"))
)
)
)
# ,
# list(
#   name = "Cats",
#   id = "cats",
#   data = list(list(name = "white cats", y = 2), list(name = "black cats", y = 3), list(name = "red cats",y = 4))
# )
)
)
hc
list(
list(
name = "Animals",
id = "animals",
data = list(
list(
name = "Centro-Oeste", id = "centro-oeste", data = list(list(name="la", y=4,drilldown="la"))
)
)
)
)
hc <- highchart() %>% hc_chart(type="column") %>% hc_xAxis(type="category") %>%
hc_add_series( name = "Things",
data = data_1
)  %>%
hc_drilldown(
series = list(
list(
name = "Centro-Oeste", id = "centro-oeste", data = list(list(name="la", y=4,drilldown="la"))
)
)
)
hc
list(
list(
name = "Centro-Oeste", id = "centro-oeste", data = list(list(name="la", y=4,drilldown="la"))
)
)
hc <- highchart() %>% hc_chart(type="column") %>% hc_xAxis(type="category") %>%
hc_add_series( name = "Things",
data = data_1
)  %>%
hc_drilldown(
series = list(
list(
name = "C-Oeste", id = "centro-oeste", data = list(list(name="la", y=4,drilldown="la"))
)
,
list(
name = "Centro-Oeste", id = "la", data = list(list(name="ala", y=4,drilldown="la"))
)
)
)
hc
hc <- highchart() %>% hc_chart(type="column") %>% hc_xAxis(type="category") %>%
hc_add_series( name = "Things",
data = data_1
)  %>%
hc_drilldown(
series = list(
list(
name = "C-Oeste", id = "centro-oeste", data = list(list(name="la", y=4,drilldown="la"))
)
,
list(
name = "Centro-Oeste", id = "la", data = list(list(name="ala", y=4,drilldown="ala"))
),
list(
name = "Centro-Oeasfste", id = "ala", data = list(list(name="la", y=4,drilldown="dla"))
)
)
)
hc
series = list(
list(
name = "C-Oeste", id = "centro-oeste", data = list(list(name="la", y=4,drilldown="la"))
)
,
list(
name = "Centro-Oeste", id = "la", data = list(list(name="ala", y=4,drilldown="ala"))
),
list(
name = "Centro-Oeasfste", id = "ala", data = list(list(name="la", y=4,drilldown="dla"))
)
)
str(series)
hc <- highchart() %>% hc_chart(type="column") %>% hc_xAxis(type="category") %>%
hc_add_series( name = "Things",
data = data_1
)  %>%
hc_drilldown(
series = list(
list(
name = "C-Oeste", id = "centro-oeste", data = list(list(name="la", y=4,drilldown="la"),
list(name="dala", y=4,drilldown="fla"))
)
,
list(
name = "Centro-Oeste", id = "la", data = list(list(name="ala", y=4,drilldown="ala"))
),
list(
name = "Centro-Oeasfste", id = "ala", data = list(list(name="la", y=4,drilldown="dla"))
)
)
)
hc
data_2
data_2 <- datahc %>% select(REGIAO, NOME_UF, freq) %>% group_by(id = REGIAO, name = NOME_UF) %>%
summarise(y = round(sum(freq), 2)) %>%
do(data = list_parse2(select(., name = name, y = y, drilldown = name)))
data_2
series = list(
list(
name = "C-Oeste", id = "centro-oeste", data = list(list(name="la", y=4,drilldown="la"),
list(name="dala", y=4,drilldown="fla"))
)
,
list(
name = "Centro-Oeste", id = "la", data = list(list(name="ala", y=4,drilldown="ala"))
),
list(
name = "Centro-Oeasfste", id = "ala", data = list(list(name="la", y=4,drilldown="dla"))
)
)
series
list_parse(data_2)
list.parse3(data_2)
# Funciona
datahc <-  merge(BNDE, ufs, by.x = "UF", by.y = "UF_05") # year input$meas
data_1 <- datahc %>% select(REGIAO, freq) %>% rename(name = REGIAO) %>%
group_by(name) %>% summarise(y = round(sum(freq, na.rm = T), 2)) %>%
mutate(drilldown = name)
data_1 <- list.parse3(data_1)
data_2 <- datahc %>% select(REGIAO, NOME_UF, freq) %>% group_by(id = REGIAO, name = NOME_UF) %>%
summarise(y = round(sum(freq), 2)) # %>% mutate(drilldown = name)
dat_2 <- list()
j = 1
for(i in unique(data_2$id)){
dat_2[[j]] <-  list(id = i, data = list.parse2(data_2[which(data_2$id == i), -1]))
j = j+1
}
data_3 <- datahc %>% select(REGIAO, NOME_UF, Sector, freq) %>% group_by(id = NOME_UF, name = Sector) %>%
summarise(y = round(sum(freq), 2))
dat_3 <- list()
j = 1
for(i in unique(data_3$id)){
dat_3[[j]] <-  list(id = i, data = list.parse2(data_3[which(data_3$id == i), -1]))
j = j+1
}
hc <- highchart() %>%
hc_chart(type = "column") %>%
hc_title(text = "Brincando") %>%
hc_xAxis(type = "category") %>%
hc_legend(enabled = FALSE) %>%
hc_plotOptions(
series = list(
boderWidth = 0,
dataLabels = list(enabled = TRUE)
)
) %>%
hc_add_series(
name = "Coef. de Exporta.",
colorByPoint = TRUE,
data = data_1
) %>%
hc_drilldown(
series =  dat_2
)
hc
dat_2
# Funciona
datahc <-  merge(BNDE, ufs, by.x = "UF", by.y = "UF_05") # year input$meas
data_1 <- datahc %>% select(REGIAO, freq) %>% rename(name = REGIAO) %>%
group_by(name) %>% summarise(y = round(sum(freq, na.rm = T), 2)) %>%
mutate(drilldown = name)
data_2 <- datahc %>% select(REGIAO, NOME_UF, freq) %>% group_by(id = REGIAO, name = NOME_UF) %>%
summarise(y = round(sum(freq), 2)) # %>% mutate(drilldown = name)
dat_2 <- list()
j = 1
for(i in unique(data_2$id)){
dat_2[[j]] <-  list(id = i, data = list.parse2(data_2[which(data_2$id == i), -1]))
j = j+1
}
data_3 <- datahc %>% select(REGIAO, NOME_UF, Sector, freq) %>% group_by(id = NOME_UF, name = Sector) %>%
summarise(y = round(sum(freq), 2))
dat_3 <- list()
j = 1
for(i in unique(data_3$id)){
dat_3[[j]] <-  list(id = i, data = list.parse2(data_3[which(data_3$id == i), -1]))
j = j+1
}
hc <- highchart() %>%
hc_chart(type = "column") %>%
hc_title(text = "Brincando") %>%
hc_xAxis(type = "category") %>%
hc_legend(enabled = FALSE) %>%
hc_plotOptions(
series = list(
boderWidth = 0,
dataLabels = list(enabled = TRUE)
)
) %>%
hc_add_series(
name = "Coef. de Exporta.",
colorByPoint = TRUE,
data = data_1
) %>%
hc_drilldown(
series =  dat_2
)
hc
# Funciona
datahc <-  merge(BNDE, ufs, by.x = "UF", by.y = "UF_05") # year input$meas
data_1 <- datahc %>% select(REGIAO, freq) %>% rename(name = REGIAO) %>%
group_by(name) %>% summarise(y = round(sum(freq, na.rm = T), 2)) %>%
mutate(drilldown = name)
# ok ----------------------------------------------------------------------
data_2 <- datahc %>% select(REGIAO, NOME_UF, freq) %>% group_by(id = REGIAO, name = NOME_UF) %>%
summarise(y = round(sum(freq), 2))  %>% mutate(drilldown = name)
dat_2 <- list()
j = 1
for(i in unique(data_2$id)){
dat_2[[j]] <-  list(id = i, data = list.parse2(data_2[which(data_2$id == i), -1]))
j = j+1
}
data_3 <- datahc %>% select(REGIAO, NOME_UF, Sector, freq) %>% group_by(id = NOME_UF, name = Sector) %>%
summarise(y = round(sum(freq), 2))
dat_3 <- list()
j = 1
for(i in unique(data_3$id)){
dat_3[[j]] <-  list(id = i, data = list.parse2(data_3[which(data_3$id == i), -1]))
j = j+1
}
hc <- highchart() %>%
hc_chart(type = "column") %>%
hc_title(text = "Brincando") %>%
hc_xAxis(type = "category") %>%
hc_legend(enabled = FALSE) %>%
hc_plotOptions(
series = list(
boderWidth = 0,
dataLabels = list(enabled = TRUE)
)
) %>%
hc_add_series(
name = "Coef. de Exporta.",
colorByPoint = TRUE,
data = data_1
) %>%
hc_drilldown(
series =  dat_2
)
hc
dat_2
# Funciona
datahc <-  merge(BNDE, ufs, by.x = "UF", by.y = "UF_05") # year input$meas
data_1 <- datahc %>% select(REGIAO, freq) %>% rename(name = REGIAO) %>%
group_by(name) %>% summarise(y = round(sum(freq, na.rm = T), 2)) %>%
mutate(drilldown = name)
# ok ----------------------------------------------------------------------
data_2 <- datahc %>% select(REGIAO, NOME_UF, freq) %>% group_by(id = REGIAO, name = NOME_UF) %>%
summarise(y = round(sum(freq), 2))  %>% mutate(drilldown = name)
dat_2 <- list()
j = 1
for(i in unique(data_2$id)){
dat_2[[j]] <-  list(id = i, data = list.parse3(data_2[which(data_2$id == i), -1]))
j = j+1
}
data_3 <- datahc %>% select(REGIAO, NOME_UF, Sector, freq) %>% group_by(id = NOME_UF, name = Sector) %>%
summarise(y = round(sum(freq), 2))
dat_3 <- list()
j = 1
for(i in unique(data_3$id)){
dat_3[[j]] <-  list(id = i, data = list.parse2(data_3[which(data_3$id == i), -1]))
j = j+1
}
hc <- highchart() %>%
hc_chart(type = "column") %>%
hc_title(text = "Brincando") %>%
hc_xAxis(type = "category") %>%
hc_legend(enabled = FALSE) %>%
hc_plotOptions(
series = list(
boderWidth = 0,
dataLabels = list(enabled = TRUE)
)
) %>%
hc_add_series(
name = "Coef. de Exporta.",
colorByPoint = TRUE,
data = data_1
) %>%
hc_drilldown(
series =  dat_2
)
hc
dat_2
dat_3
# Funciona
datahc <-  merge(BNDE, ufs, by.x = "UF", by.y = "UF_05") # year input$meas
data_1 <- datahc %>% select(REGIAO, freq) %>% rename(name = REGIAO) %>%
group_by(name) %>% summarise(y = round(sum(freq, na.rm = T), 2)) %>%
mutate(drilldown = name)
# ok ----------------------------------------------------------------------
data_2 <- datahc %>% select(REGIAO, NOME_UF, freq) %>% group_by(id = REGIAO, name = NOME_UF) %>%
summarise(y = round(sum(freq), 2))  %>% mutate(drilldown = name)
dat_2 <- list()
j = 1
for(i in unique(data_2$id)){
dat_2[[j]] <-  list(id = i, data = list.parse3(data_2[which(data_2$id == i), -1]))
j = j+1
}
data_3 <- datahc %>% select(REGIAO, NOME_UF, Sector, freq) %>% group_by(id = NOME_UF, name = Sector) %>%
summarise(y = round(sum(freq), 2))
dat_3 <- list()
j = 1
for(i in unique(data_3$id)){
dat_3[[j]] <-  list(id = i, data = list.parse2(data_3[which(data_3$id == i), -1]))
j = j+1
}
hc <- highchart() %>%
hc_chart(type = "column") %>%
hc_title(text = "Brincando") %>%
hc_xAxis(type = "category") %>%
hc_legend(enabled = FALSE) %>%
hc_plotOptions(
series = list(
boderWidth = 0,
dataLabels = list(enabled = TRUE)
)
) %>%
hc_add_series(
name = "Coef. de Exporta.",
colorByPoint = TRUE,
data = data_1
) %>%
hc_drilldown(
series =  c(dat_2, dat_3)
)
hc
View(BNDES)
# Funciona
datahc <-  merge(BNDE, ufs, by.x = "UF", by.y = "UF_05") # year input$meas
data_1 <- datahc %>% select(REGIAO, freq) %>% rename(name = REGIAO) %>%
group_by(name) %>% summarise(y = round(sum(freq, na.rm = T), 2)) %>%
mutate(drilldown = name)
# ok ----------------------------------------------------------------------
data_2 <- datahc %>% select(REGIAO, NOME_UF, freq) %>% group_by(id = REGIAO, name = NOME_UF) %>%
summarise(y = round(sum(freq), 2))  %>% mutate(drilldown = name)
dat_2 <- list()
j = 1
for(i in unique(data_2$id)){
dat_2[[j]] <-  list(id = i, data = list.parse3(data_2[which(data_2$id == i), -1]))
j = j+1
}
data_3 <- datahc %>% select(REGIAO, NOME_UF, Sector, freq) %>% group_by(id = NOME_UF, name = Sector) %>%
summarise(y = round(sum(freq), 2))
dat_3 <- list()
j = 1
for(i in unique(data_3$id)){
dat_3[[j]] <-  list(id = i, data = list.parse2(data_3[which(data_3$id == i), -1]))
j = j+1
}
hc <- highchart() %>%
hc_chart(type = "column") %>%
hc_title(text = "Brincando") %>%
hc_xAxis(type = "category") %>%
hc_legend(enabled = FALSE) %>%
hc_plotOptions(
series = list(
boderWidth = 0,
dataLabels = list(enabled = TRUE)
)
) %>%
hc_add_series(
name = "Coef. de Exporta.",
colorByPoint = TRUE,
data = data_1
) %>%
hc_drilldown(
series =  c(dat_2, dat_3)
)
hc
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
datahc <-  merge(BNDE, ufs, by.x = "UF", by.y = "UF_05")
View(datahc)
filter(datahc, Year == 2002)
datahc["meas3"] <- datahc["freq"][,1]
hc_chart
?hc_chart
runApp()
runApp()
input <- list()
input$Year3="All"
input$meas3="freq"
need(input$meas3, " ")
datahc <-  merge(BNDE, ufs, by.x = "UF", by.y = "UF_05")
# Year Filter
datahc <- ifelse(input$Year3=="All", datahc, filter(datahc, Year == input$Year3))
datahc["meas3"] <- datahc[input$meas3][,1]
datahc[input$meas3]
datahc
datahc <-  merge(BNDE, ufs, by.x = "UF", by.y = "UF_05")
# Year Filter
datahc <- ifelse(input$Year3=="All", datahc, filter(datahc, Year == input$Year3))
ifelse(input$Year3=="All", datahc, filter(datahc, Year == input$Year3))
input$Year3 !="All"
datahc <-  merge(BNDE, ufs, by.x = "UF", by.y = "UF_05")
# Year Filter
if(input$Year3 !="All") {
datahc <- filter(datahc, Year == input$Year3)
}
datahc["meas3"] <- datahc[input$meas3][,1]
datahc
# First Layer
data_1 <- datahc %>% select(REGIAO, meas3) %>% rename(name = REGIAO) %>%
group_by(name) %>% summarise(y = round(sum(meas3, na.rm = T), 2)) %>%
mutate(drilldown = name)
# Second Layer
data_2 <- datahc %>% select(REGIAO, NOME_UF, meas3) %>% group_by(id = REGIAO, name = NOME_UF) %>%
summarise(y = round(sum(meas3), 2))  %>% mutate(drilldown = name)
dat_2 <- list()
j = 1
for(i in unique(data_2$id)){
dat_2[[j]] <-  list(id = i, data = list.parse3(data_2[which(data_2$id == i), -1]))
j = j+1
}
# Third Layer
data_3 <- datahc %>% select(REGIAO, NOME_UF, Sector, freq) %>% group_by(id = NOME_UF, name = Sector) %>%
summarise(y = round(sum(freq), 2))
dat_3 <- list()
j = 1
for(i in unique(data_3$id)){
dat_3[[j]] <-  list(id = i, data = list.parse2(data_3[which(data_3$id == i), -1]))
j = j+1
}
# HighChart
hc <- highchart() %>%
hc_chart(type = "column") %>%
hc_title(text = "Total ") %>%
hc_xAxis(type = "category") %>%
hc_legend(enabled = FALSE) %>%
hc_plotOptions(
series = list(
boderWidth = 0,
dataLabels = list(enabled = TRUE)
)
) %>%
hc_add_series(
name = input$meas3,
colorByPoint = TRUE,
data = data_1
) %>%
hc_drilldown(
series =  c(dat_2, dat_3)
)
hc
runApp()
runApp()
runApp()
runApp()
runApp()
data2 <- BNDE %>% group_by(UF, Sector) %>%
summarise(freq = sum(freq, na.rm = T),
value = sum(value, na.rm = T),
mean_val = sum(value/freq, na.rm = T))
# UF
UF <- ufs[which(ufs$NOME_UF == input$uf), 1]
UF
data2 <- data2 %>% group_by(Sector) %>% summarise(freq = sum(freq, na.rm = T),
value = sum(value, na.rm = T),
mean_val = sum(value/freq, na.rm = T))
data2 <- data2 %>% data.frame()
runApp()
